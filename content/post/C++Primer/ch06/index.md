---
title: C++ Primer Ch06
description: Function
date: 2023-12-08T21:13:28+08:00
image: assets/c++primer.jpg
math: true
toc: true
categories:
    - C++ Primer
tags:
    - CPP
    - C++ Primer
---

# 函数

函数是一个命名了的代码块，我们通过调用函数执行响应的代码。函数可以有 0 个或多个参数，而且（通常）会返回一个结果。可以重载函数，即同一个名字可以对应几个不同的函数。

## 函数基础

一个典型的 **函数（function）** 定义包括以下部分：返回类型（return type）、函数名字、由 0 个或多个 **形参（parameter）** 组成的列表以及函数体。

我们通过 **调用运算符（call operator）** 来执行函数：调用运算符的形式是一对圆括号，它作用于一个表达式，该表达式是函数或者指向函数的指针；圆括号之内是一个用逗号隔开的 **实参（argument）** 列表，我们用实参初始化函数的形参，调用表达式的类型就是函数返回的类型。

**编写函数**：例如编写一个求 `n` 的阶乘的函数：

```cpp
int fact(int n) {
    int res = 1;
    while (n > 1) {
        res *= n --;
    }

    return res;
}
```

**调用函数**：要调用 `fact` 函数，首先需要提供一个整数，得到的返回结果也是一个整数值：

```cpp
int main() {
    int x = fact(5);
    cout << "5! = " << x << endl;

    return 0;
}
```

函数的调用完成两项工作：实参初始化函数对应的形参，将控制权转移给被调函数。此时，**主调函数（calling funciton）** 的执行暂停，**被调函数（called funciton）** 开始执行。

### 局部对象

在 `C++` 语言中，名字有作用域，对象有 **生命周期（lifetime）**：

- 名字的作用域是程序文本的一部分，名字在其中可见。
- 对象的生命周期是程序执行过程中该对象存在的一段时间。

在函数体内，形参和内部定义的变量统称为 **局部变量（local variable）**，它们对函数而言是“局部”饿，仅在函数的作用域内可见，同时局部变量还会 **隐藏（hide）**在外层作用域中同名的其他声明中。

**局部静态对象**：某些时候，有必要令局部变量的生命周期贯穿函数调用及之后的时间。可以将局部变量定义成 `static` 类型从而获得这样的对象，**局部静态对象（local static object）** 在程序的执行路径第一次经过对象定义语句时初始化，并且直到程序终止才被销毁，在此期间即使对象所在的函数结束执行也不会对它有影响。

## 参数传递

